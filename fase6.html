<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>√öltima Fase - C√≥digo Completo</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        background: #111;
        color: white;
        font-family: Arial, sans-serif;
        padding: 20px;
        text-align: center;
      }
      h1,
      p {
        margin: 5px;
      }
      input {
        padding: 10px 15px;
        font-size: 18px;
        border-radius: 8px;
        border: none;
        margin-top: 15px;
        width: 300px;
        text-align: center;
        background: #222;
        color: white;
      }
      .popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
        z-index: 999;
      }
      .popup-content {
        background: white;
        color: black;
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        width: 80%;
        max-width: 400px;
        animation: scaleUp 0.3s ease;
      }
      @keyframes scaleUp {
        from {
          transform: scale(0.8);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }
      .popup-content button {
        margin-top: 15px;
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        background: green;
        color: white;
        font-size: 16px;
        cursor: pointer;
      }
      /* Ajuste espec√≠fico para celular */
      @media (max-width: 600px) {
        h1 {
          font-size: 20px;
          text-align: center;
        }

        #scoreDisplay {
          font-size: 14px;
        }

        canvas {
          border: 2px solid white;
          background: black;
          width: 80%;
        }

        .controls {
          grid-template-columns: 60px 60px 60px;
          grid-template-rows: 60px 60px;
          gap: 6px;
        }

        .controls button {
          font-size: 20px;
          padding: 8px;
        }

        .popup-content {
          width: 90%;
          max-width: 250px;
          font-size: 14px;
        }

        .popup-content img {
          width: 120px;
        }
      }
    </style>
  </head>
  <body>
    <h1>√öltima Fase</h1>
    <p>
      Parece que esse texto cont√©m o link que leva pra sua surpresa, mas ele
      est√° todo estranho. Tente desvendar para ter o c√≥digo completo.
    </p>

    <p><b>IVS86CfNYog-F_dUvfeyXeq_pf2_iNPHaPQHb5aRiiA</b></p>
    <p>
      <b
        >01101101 01100001 01110100 01100101 01110101 01110011 01110011 01101001
        01101100 01110110 01100001 01100011 01110010 01110011-..-. . -. .. --.
        -- .-</b
      >
    </p>

    <input
      type="text"
      id="urlInput"
      placeholder="Cole a URL aqui sem espa√ßos"
    />

    <!-- POPUP DE INSTRU√á√ÉO -->
    <div id="popupNext" class="popup">
      <div class="popup-content">
        <h2>üéâ Voc√™ acertou!</h2>
        <p>
          Agora entre na p√°gina clicado no bot√£o abaixo e procure a pasta
          <b>180824</b>. Em breve vai aparecer um novo arquivo chamado
          <b>surpresa</b>!
        </p>
        <a target="_blank" href="https://github.com/mateussilvacrs/ENIGMA">
          <button>ACESSAR!</button></a
        >
      </div>
    </div>

    <!-- POPUP DE ACESSO NEGADO -->
    <div id="popupBlocked" class="popup">
      <div class="popup-content">
        <h2>‚ö†Ô∏è Acesso negado!</h2>
        <p>Querendo burlar o jogo n√© boboca?</p>
        <img src="assets/trapaca.jpg" alt="Perdeu" />
        <button onclick="goBack()">Voltar para a Fase secreta</button>
      </div>
    </div>

    <script>
      // Checa se a fase anterior foi completada
      window.addEventListener("load", () => {
        const fase3Completa = localStorage.getItem("fase3Completa");
        if (!fase3Completa) {
          document.getElementById("popupBlocked").style.display = "flex";
        }
      });
      function goBack() {
        window.location.href = "index2.html";
      }

      const input = document.getElementById("urlInput");
      const popup = document.getElementById("popupNext");

      input.addEventListener("input", () => {
        const val = input.value.trim();
        if (val === "https://github.com/mateussilvacrs/ENIGMA") {
          popup.style.display = "flex";
          input.value = "";
        }
      });

      function closePopup() {
        popup.style.display = "none";
        input.focus();
      }

      let devtoolsOpen = false;

      const threshold = 160; // tamanho m√≠nimo para detectar DevTools

      setInterval(() => {
        const widthThreshold =
          window.outerWidth - window.innerWidth > threshold;
        const heightThreshold =
          window.outerHeight - window.innerHeight > threshold;
        devtoolsOpen = widthThreshold || heightThreshold;
      });
    </script>
  </body>
</html>
